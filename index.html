<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <link rel="icon" href="dist/favicon.ico"/>
    <title>躺平计算器</title>
    <link rel="stylesheet" href="dist/css/bootstrap.min.css">
    <style>
body{font-family:Arial,sans-serif;margin:20px;}label{font-weight:bold;}.negative{background-color:#c2c2c2;}.th-info{font-size:60%;font-weight:100;}#monthlyExpensesDisplay{font-size:50%;color:gray;}.floating-text{position:absolute;top:33px;right:10px;background-color:rgba(255,255,255,0.8);padding:5px 10px;border-radius:5px;pointer-events:none;z-index:100;font-size:60%;color:gray;font-weight:100;}.interest-cell{color:rgba(31,119,180,1);}.annual-expenses-cell{color:rgba(44,160,44,1);}.principal-cell{color:rgba(214,39,40,1);}.alert-info{font-size:80%;}

    </style>
    <script src="dist/chart.min.js"></script>
</head>
<body>
<h2 id="pageTitle"></h2>

<div class="row">
    <div class="col-md-2 form-group">
        <label for="annualInterestRate">年化利率%:</label>
        <input type="number" id="annualInterestRate" class="form-control" min="0" max="1000" step="0.01" value="2.000"/>
    </div>
    <div class="col-md-3 form-group">
        <label for="principal">本金:</label>
        <input type="number" id="principal" class="form-control" min="0" step="100000" value="2000000"/>
    </div>
    <div class="col-md-2 form-group">
        <label for="annualExpenses">当前年消费:</label>
        <input type="number" id="annualExpenses" class="form-control" min="0" max="10000000" step="5000" value="60000"/>
        <span id="monthlyExpensesDisplay" class="text-muted"></span>
    </div>
    <div class="col-md-3 form-group">
        <label for="inflationRate">通胀率%:</label>
        <div class="input-group">
            <input type="number" id="inflationRate" class="form-control" min="0" max="1000" step="0.01" value="2.229"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" onclick="toggleInflationRate()">
                    <span id="inflationRateIcon">×</span>
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-2 form-group">
        <label><br></label>
        <div class="input-group">
            <button class="btn btn-success" onclick="calculateInterest()">计算</button>
        </div>
    </div>
</div>


<div style="position: relative;">
    <canvas id="lineChart" width="400" height="200"></canvas>
    <div id="floatingText" class="floating-text"></div>
</div>

<table class="table table-hover mt-4">
    <thead class="thead-dark">
    <tr>
        <th>年数</th>
        <th class="th-info text-center">年利息<span class="th-info">(本金×年化利率)</span></th>
        <th class="th-info text-center">年消费<span class="th-info">(1+通胀率)×上年消费</span></th>
        <th class="th-info text-center">本金<span class="th-info">(上年本金+年利息-年消费)</span></th>
    </tr>
    </thead>
    <tbody id="resultTable">
    </tbody>
</table>

<div class="alert alert-info" role="alert">
    中国近十年通胀率平均在2.229%左右——<a href="https://www.baidu.com/s?wd=中国近十年通胀率" target="_blank">https://www.baidu.com/s?wd=中国近十年通胀率</a>
</div>

<script>
const _0x1baf=['rgba(214,\x2039,\x2040,\x201)','innerHTML','pageTitle','annualExpenses','lineChart','principal','0\x20≤\x20本金（如:2000000）','年化:','0\x20≤\x20年化利率\x20≤\x201000（如:1.693）','getElementById','inflationRate','interest-cell','classList','\x20当前年消费:','insertCell','monthlyExpensesDisplay','%\x20本金:','textContent','add','value','max','getContext','toFixed','rgba(44,\x20160,\x2044,\x201)','push','text-center'];const _0x1123=function(_0x1baf55,_0x1123d7){_0x1baf55=_0x1baf55-0x0;let _0x5c56e2=_0x1baf[_0x1baf55];return _0x5c56e2;};function toggleInflationRate(){const _0x51415e=document['getElementById']('inflationRate');_0x51415e['value']='0';calculateInterest();}function updateMonthlyExpensesDisplay(){const _0x5cb136=document[_0x1123('0x9')](_0x1123('0x3'));const _0x51b67b=document[_0x1123('0x9')](_0x1123('0xf'));const _0xca590e=parseFloat(_0x5cb136[_0x1123('0x13')]);const _0x57806b=(_0xca590e/0xc)[_0x1123('0x16')](0x2);_0x51b67b[_0x1123('0x11')]='月均:'+_0x57806b;}document['getElementById'](_0x1123('0x3'))['addEventListener']('input',updateMonthlyExpensesDisplay);updateMonthlyExpensesDisplay();let lineChart;function calculateInterest(){let _0x165368=parseFloat(document[_0x1123('0x9')](_0x1123('0x5'))[_0x1123('0x13')]);let _0x27dcbc=parseFloat(document[_0x1123('0x9')]('annualInterestRate')[_0x1123('0x13')]);let _0x56d50f=parseFloat(document['getElementById']('annualExpenses')[_0x1123('0x13')]);let _0x5370e3=parseFloat(document[_0x1123('0x9')](_0x1123('0xa'))['value']);let _0x539837=0x1;let _0x4d8f53=0x65;let _0x2dfc1b=_0x1123('0x7')+_0x27dcbc+_0x1123('0x10')+_0x165368+_0x1123('0xd')+_0x56d50f+'\x20通胀率:'+_0x5370e3+'%';if(isNaN(_0x27dcbc)||_0x27dcbc<0x0||_0x27dcbc>0x3e8){alert(_0x1123('0x8'));return;}if(isNaN(_0x165368)||_0x165368<0x0){alert(_0x1123('0x6'));return;}if(isNaN(_0x56d50f)||_0x56d50f<0x0||_0x56d50f>0x989680){alert('0\x20≤\x20当前年消费\x20≤\x2010000000（如:600000）');return;}_0x56d50f=_0x56d50f*-0x1;if(isNaN(_0x5370e3)||_0x5370e3<0x0||_0x5370e3>0x3e8){alert('0\x20≤\x20通胀率\x20≤\x201000（如:2.2229）');return;}let _0x4f9907=document[_0x1123('0x9')]('resultTable');let _0x511606=document['getElementById'](_0x1123('0x2'));let _0x2b578e=document[_0x1123('0x9')]('floatingText');_0x4f9907[_0x1123('0x1')]='';let _0x5c1ffe=[];let _0x54767b=[];let _0x41c169=[];let _0x37d319=[];let _0x185884=-0x1;let _0x154873=0x0;let _0x4074bf;while(_0x4d8f53>0x0){_0x4074bf=_0x165368*(_0x27dcbc/0x64);_0x56d50f=(0x1+_0x5370e3/0x64)*_0x56d50f;let _0x315447=_0x56d50f*-0x1>_0x165368;_0x165368=_0x165368+_0x4074bf+_0x56d50f;_0x4074bf=Math[_0x1123('0x14')](_0x4074bf,0x0);_0x165368=Math[_0x1123('0x14')](_0x165368,0x0);let _0x2e3710=_0x4f9907['insertRow']();let _0xe005c3=_0x2e3710['insertCell'](0x0);let _0x330988=_0x2e3710[_0x1123('0xe')](0x1);let _0x7c38aa=_0x2e3710['insertCell'](0x2);let _0x3115cd=_0x2e3710['insertCell'](0x3);_0x330988[_0x1123('0xc')]['add'](_0x1123('0xb'),_0x1123('0x19'));_0x7c38aa['classList']['add']('annual-expenses-cell',_0x1123('0x19'));_0x3115cd['classList'][_0x1123('0x12')]('principal-cell','text-center');_0xe005c3[_0x1123('0x1')]=_0x539837['toString']();_0x330988[_0x1123('0x1')]=_0x4074bf['toFixed'](0x2);if(_0x315447){_0x7c38aa['innerHTML']='×';}else{_0x7c38aa[_0x1123('0x1')]=_0x56d50f[_0x1123('0x16')](0x2);_0x37d319[_0x1123('0x18')](_0x56d50f[_0x1123('0x16')](0x2));}_0x3115cd['innerHTML']=_0x165368['toFixed'](0x2);_0x5c1ffe['push'](_0x539837);_0x54767b['push'](_0x4074bf['toFixed'](0x2));_0x41c169[_0x1123('0x18')](_0x165368['toFixed'](0x2));if(_0x185884==-0x1&&_0x165368==0x0){_0x185884=_0x539837-0x1;}if(_0x165368<=0x0){_0x2e3710['classList'][_0x1123('0x12')]('negative');_0x154873++;}if(_0x154873>0x3||_0x4d8f53==0x1){_0xe005c3[_0x1123('0x1')]='⋮';_0x330988['innerHTML']='⋮';_0x7c38aa[_0x1123('0x1')]='⋮';_0x3115cd['innerHTML']='⋮';}if(_0x154873>0x3){break;}_0x539837++;_0x4d8f53--;}_0x511606[_0x1123('0x1')]='躺平计算器（还能活'+(_0x185884!=-0x1?_0x185884:'100+')+'年）';_0x2b578e[_0x1123('0x1')]=_0x2dfc1b;drawLineChart(_0x5c1ffe,_0x54767b,_0x41c169,_0x37d319);}function drawLineChart(_0x29c0b4,_0x49b6f7,_0x279025,_0x37bb23){if(lineChart){lineChart['destroy']();}lineChart=new Chart(document['getElementById'](_0x1123('0x4'))[_0x1123('0x15')]('2d'),{'type':'line','data':{'labels':_0x29c0b4,'datasets':[{'label':'年利息','data':_0x49b6f7,'borderColor':'rgba(31,\x20119,\x20180,\x201)','backgroundColor':'rgba(31,\x20119,\x20180,\x200.2)','fill':!![]},{'label':'消费','data':_0x37bb23,'borderColor':_0x1123('0x17'),'backgroundColor':'rgba(44,\x20160,\x2044,\x200.2)','fill':!![]},{'label':'本金','data':_0x279025,'borderColor':_0x1123('0x0'),'backgroundColor':'rgba(214,\x2039,\x2040,\x200.2)','fill':!![]}]}});}window['onload']=function(){calculateInterest();};
</script>
</body>
</html>
