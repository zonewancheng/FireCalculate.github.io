<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <link rel="icon" href="dist/favicon.ico"/>
    <title>躺平计算器</title>
    <link rel="stylesheet" href="dist/css/bootstrap.min.css">
    <script src="dist/js/jquery-3.7.0.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
    <style>
body{font-family:Arial,sans-serif;margin:20px;}label{font-weight:bold;}.negative{background-color:#c2c2c2;}.th-info{font-size:60%;font-weight:100;}.liveYear{color:rgba(214,39,40,1);}#monthlyExpensesDisplay,#principalDisplay{font-size:80%;color:gray;}.floating-text{position:absolute;top:33px;right:10px;background-color:rgba(255,255,255,0.8);padding:5px 10px;border-radius:5px;pointer-events:none;z-index:100;font-size:80%;color:#555555;font-weight:100;}.interest-cell{color:rgba(31,119,180,1);}.annual-expenses-cell{color:rgba(44,160,44,1);}.principal-cell{color:rgba(214,39,40,1);}.alert-info{font-size:80%;}.bg-liability{background-color:rgba(230,230,230,0.85);animation:fadeInBackground 1s ease-in-out;}@keyframes fadeInBackground{from{background-color:transparent;}to{background-color:rgba(230,230,230,0.85);}}.btn-black{color:#fff;background-color:#333;border-color:#333;}.btn-black:hover{color:#fff;background-color:#000;border-color:#000;}
    </style>
    <script src="dist/chart.min.js"></script>
</head>
<body>
<h2 id="pageTitle"></h2>
<div class="row">
    <div class="col-md-4 form-group">
        <label for="principal">本金:</label>
        <div class="input-group">
            <input type="number" id="principal" class="form-control form-control-lg" min="0" max="999999999"
                   step="100000" value="2000000" oninput="limitInputLength(this, 15)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementPrincipal()">-</button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementPrincipal()">+</button>
            </div>
        </div>
        <span id="principalDisplay" class="text-muted"></span>
    </div>
    <div class="col-md-4 form-group">
        <label for="annualInterestRate">年化利率%:</label>
        <div class="input-group">
            <input type="number" id="annualInterestRate" class="form-control form-control-lg" min="0" max="1000"
                   step="0.1" value="2.000" oninput="limitInputLength(this, 6)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementInterestRate()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementInterestRate()">+
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-4 form-group">
        <label for="stableIncome">稳定年收入<span class="th-info">(退休金/副业等)</span>:</label>
        <div class="input-group">
            <input type="number" id="stableIncome" class="form-control form-control-lg" min="0" max="999999999"
                   step="10000" value="0"
                   oninput="limitInputLength(this, 10)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="resetStableIncome()">×</button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementStableIncome()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementStableIncome()">+
                </button>
            </div>
        </div>
        <span id="stableIncomeDisplay" class="text-muted"></span>
    </div>
</div>
<div class="row">
    <div class="col-md-4 form-group bg-liability">
        <label for="annualExpenses">当前年消费:</label>
        <div class="input-group">
            <input type="number" id="annualExpenses" class="form-control form-control-lg" min="0" max="99999999"
                   step="5000" value="45000" oninput="limitInputLength(this, 10)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementAnnualExpenses()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementAnnualExpenses()">+
                </button>
            </div>
        </div>
        <span id="monthlyExpensesDisplay" class="text-muted"></span>
    </div>
    <div class="col-md-4 form-group bg-liability">
        <label for="inflationRate">通胀率%:</label>
        <div class="input-group">
            <input type="number" id="inflationRate" class="form-control form-control-lg" min="0" max="1000" step="0.1"
                   value="2.229" oninput="limitInputLength(this, 6)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="resetInflationRate()">×</button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementInflationRate()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementInflationRate()">+
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-2 form-group offset-md-2">
        <label><br></label>
        <div class="input-group">
            <button class="btn btn-black btn-lg" onclick="calculateInterest()">计算</button>
        </div>
    </div>
</div>


<div style="position: relative;">
    <canvas id="lineChart" width="400" height="200"></canvas>
    <div id="floatingText" class="floating-text"></div>
</div>

<table class="table table-hover mt-4">
    <thead class="thead-dark">
    <tr>
        <th class="text-center">年数</th>
        <th class="text-center">年利息<span class="th-info">(本金×年化利率)</span></th>
        <th class="text-center">年消费<span class="th-info">(1+通胀率)×上年消费</span></th>
        <th class="text-center">本金<span class="th-info">(上年本金+年利息+年收入-年消费)</span></th>
    </tr>
    </thead>
    <tbody id="resultTable">
    </tbody>
</table>

<div class="alert alert-info" role="alert">
    中国近十年通胀率平均在2.229%左右——<a href="https://www.baidu.com/s?wd=中国近十年通胀率" target="_blank">https://www.baidu.com/s?wd=中国近十年通胀率</a>
</div>

<div class="modal" id="alertModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">提示</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ul id="errorList"></ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
            </div>
        </div>
    </div>
</div>

<script>
const _0x3582=['toFixed','stepDown','resultTable','principal-cell','line','modal','stableIncome','addEventListener','principal','input','textContent','stepUp','floatingText','negative','interest-cell','100+','push','add','0\x20≤\x20本金\x20≤\x20999999999999999（如:2000000）','getElementById','append','annualInterestRate','annual-expenses-cell','annualExpenses','replace','toString','max','insertRow','#errorList','text-center','innerHTML','length','</li>','年利息','\x20通胀率:','show','onload','value','insertCell','slice','getContext','#alertModal'];const _0x5b5a=function(_0x3582d4,_0x5b5a11){_0x3582d4=_0x3582d4-0x0;let _0xe3257d=_0x3582[_0x3582d4];return _0xe3257d;};function limitInputLength(_0x41a98e,_0xcbea52){if(_0x41a98e[_0x5b5a('0x25')][_0x5b5a('0x1f')]>_0xcbea52){_0x41a98e[_0x5b5a('0x25')]=_0x41a98e[_0x5b5a('0x25')][_0x5b5a('0x27')](0x0,_0xcbea52);}}function updatePrincipalDisplay(){let _0x2a7efe=parseInt(document['getElementById'](_0x5b5a('0x8'))[_0x5b5a('0x25')][_0x5b5a('0x18')](/\D/g,''));document['getElementById']('principal')[_0x5b5a('0x25')]=_0x2a7efe;document['getElementById']('principalDisplay')[_0x5b5a('0xa')]=_0x2a7efe/0x2710+'万';}document['getElementById']('principal')[_0x5b5a('0x7')]('input',updatePrincipalDisplay);updatePrincipalDisplay();function updateMonthlyExpensesDisplay(){const _0x985143=parseFloat(document[_0x5b5a('0x13')](_0x5b5a('0x17'))[_0x5b5a('0x25')][_0x5b5a('0x18')](/\D/g,''));document['getElementById']('annualExpenses')['value']=_0x985143;document[_0x5b5a('0x13')]('monthlyExpensesDisplay')[_0x5b5a('0xa')]=_0x985143/0x2710+'万,\x20月均:'+(_0x985143/0xc)['toFixed'](0x2);}document[_0x5b5a('0x13')]('annualExpenses')[_0x5b5a('0x7')](_0x5b5a('0x9'),updateMonthlyExpensesDisplay);updateMonthlyExpensesDisplay();function updateStableIncomeDisplay(){const _0x2fd676=parseFloat(document[_0x5b5a('0x13')](_0x5b5a('0x6'))[_0x5b5a('0x25')][_0x5b5a('0x18')](/\D/g,''));document[_0x5b5a('0x13')]('stableIncome')[_0x5b5a('0x25')]=_0x2fd676;document['getElementById']('stableIncomeDisplay')['textContent']=_0x2fd676==0x0?'无':_0x2fd676/0x2710+'万,\x20月均:'+(_0x2fd676/0xc)[_0x5b5a('0x0')](0x2);}document['getElementById']('stableIncome')[_0x5b5a('0x7')](_0x5b5a('0x9'),updateStableIncomeDisplay);updateStableIncomeDisplay();function incrementInterestRate(){document[_0x5b5a('0x13')](_0x5b5a('0x15'))[_0x5b5a('0xb')]();calculateInterest();}function decrementInterestRate(){document['getElementById'](_0x5b5a('0x15'))['stepDown']();calculateInterest();}function incrementPrincipal(){document['getElementById']('principal')[_0x5b5a('0xb')]();updatePrincipalDisplay();calculateInterest();}function decrementPrincipal(){document['getElementById'](_0x5b5a('0x8'))[_0x5b5a('0x1')]();updatePrincipalDisplay();calculateInterest();}function incrementAnnualExpenses(){document['getElementById'](_0x5b5a('0x17'))[_0x5b5a('0xb')]();updateMonthlyExpensesDisplay();calculateInterest();}function decrementAnnualExpenses(){document['getElementById']('annualExpenses')['stepDown']();updateMonthlyExpensesDisplay();calculateInterest();}function incrementInflationRate(){document['getElementById']('inflationRate')['stepUp']();calculateInterest();}function decrementInflationRate(){document['getElementById']('inflationRate')[_0x5b5a('0x1')]();calculateInterest();}function resetInflationRate(){document['getElementById']('inflationRate')[_0x5b5a('0x25')]=0x0;calculateInterest();}function incrementStableIncome(){document[_0x5b5a('0x13')](_0x5b5a('0x6'))[_0x5b5a('0xb')]();updateStableIncomeDisplay();calculateInterest();}function decrementStableIncome(){document['getElementById'](_0x5b5a('0x6'))['stepDown']();updateStableIncomeDisplay();calculateInterest();}function resetStableIncome(){document[_0x5b5a('0x13')]('stableIncome')[_0x5b5a('0x25')]=0x0;updateStableIncomeDisplay();calculateInterest();}function showAlert(_0xd1cb58){let _0x5f5715=$(_0x5b5a('0x1c'));_0x5f5715['empty']();$['each'](_0xd1cb58,function(_0x54eb62,_0x1e593e){_0x5f5715[_0x5b5a('0x14')]('<li>'+_0x1e593e+_0x5b5a('0x20'));});$(_0x5b5a('0x29'))[_0x5b5a('0x5')](_0x5b5a('0x23'));}let lineChart;function calculateInterest(){let _0x260de3=parseFloat(document[_0x5b5a('0x13')](_0x5b5a('0x8'))[_0x5b5a('0x25')]);let _0x5e770a=parseFloat(document[_0x5b5a('0x13')]('stableIncome')[_0x5b5a('0x25')]);let _0x158f5c=parseFloat(document[_0x5b5a('0x13')](_0x5b5a('0x15'))[_0x5b5a('0x25')]);let _0x23c026=parseFloat(document[_0x5b5a('0x13')](_0x5b5a('0x17'))[_0x5b5a('0x25')]);let _0x505d14=parseFloat(document[_0x5b5a('0x13')]('inflationRate')['value']);let _0x2ec7ec=0x1;let _0x526328=0x65;let _0x5b641e='年化:'+_0x158f5c+'%\x20本金:'+_0x260de3+'\x20当前年消费:'+_0x23c026+_0x5b5a('0x22')+_0x505d14+'%';let _0x3c4906=[];if(isNaN(_0x260de3)||_0x260de3<0x0||_0x260de3>0x38d7ea4c67fff){_0x3c4906[_0x5b5a('0x10')](_0x5b5a('0x12'));}if(isNaN(_0x158f5c)||_0x158f5c<0x0||_0x158f5c>0x3e8){_0x3c4906[_0x5b5a('0x10')]('0\x20≤\x20年化利率\x20≤\x201000（如:1.693）');}if(isNaN(_0x5e770a)||_0x5e770a<0x0||_0x5e770a>0x3b9ac9ff){_0x3c4906[_0x5b5a('0x10')]('0\x20≤\x20年收入\x20≤\x20999999999（如:10000）');}if(isNaN(_0x23c026)||_0x23c026<0x0||_0x23c026>0x2540be3ff){_0x3c4906['push']('0\x20≤\x20当前年消费\x20≤\x209999999999（如:600000）');}else{_0x23c026=_0x23c026*-0x1;}if(isNaN(_0x505d14)||_0x505d14<0x0||_0x505d14>0x3e8){_0x3c4906[_0x5b5a('0x10')]('0\x20≤\x20通胀率\x20≤\x201000（如:2.2229）<a\x20class=\x27th-info\x27\x20href=\x27https://www.baidu.com/s?wd=中国近十年通胀率\x27\x20target=\x27_blank\x27>中国近十年通胀率平均在2.229%左右</a>');}if(_0x3c4906[_0x5b5a('0x1f')]>0x0){showAlert(_0x3c4906);return;}let _0x32462c=document[_0x5b5a('0x13')](_0x5b5a('0x2'));let _0x362475=document['getElementById']('pageTitle');let _0x5df755=document['getElementById'](_0x5b5a('0xc'));_0x32462c['innerHTML']='';let _0x635ead=[];let _0x1f845f=[];let _0x990ad1=[];let _0x314d0c=[];let _0x2fae3c=-0x1;let _0x229078=0x0;let _0x4ed1a9;while(_0x526328>0x0){_0x4ed1a9=_0x260de3*(_0x158f5c/0x64);_0x23c026=(0x1+_0x505d14/0x64)*_0x23c026;let _0x210006=_0x23c026*-0x1>_0x260de3+_0x4ed1a9+_0x5e770a;_0x260de3=_0x260de3+_0x4ed1a9+_0x5e770a+_0x23c026;_0x4ed1a9=Math[_0x5b5a('0x1a')](_0x4ed1a9,0x0);_0x260de3=Math['max'](_0x260de3,0x0);let _0xec75f8=_0x32462c[_0x5b5a('0x1b')]();let _0x4538cf=_0xec75f8[_0x5b5a('0x26')](0x0);let _0x43c433=_0xec75f8[_0x5b5a('0x26')](0x1);let _0x3ea012=_0xec75f8[_0x5b5a('0x26')](0x2);let _0x345780=_0xec75f8[_0x5b5a('0x26')](0x3);_0x4538cf['classList'][_0x5b5a('0x11')](_0x5b5a('0x1d'));_0x43c433['classList'][_0x5b5a('0x11')](_0x5b5a('0xe'),_0x5b5a('0x1d'));_0x3ea012['classList'][_0x5b5a('0x11')](_0x5b5a('0x16'),'text-center');_0x345780['classList']['add'](_0x5b5a('0x3'),'text-center');_0x4538cf[_0x5b5a('0x1e')]=_0x2ec7ec[_0x5b5a('0x19')]();_0x43c433['innerHTML']=_0x4ed1a9['toFixed'](0x2);_0x3ea012[_0x5b5a('0x1e')]=_0x23c026[_0x5b5a('0x0')](0x2)+(_0x210006?'(不足)':'');_0x314d0c['push'](_0x23c026['toFixed'](0x2));_0x345780['innerHTML']=_0x260de3['toFixed'](0x2);_0x635ead['push'](_0x2ec7ec);_0x1f845f[_0x5b5a('0x10')](_0x4ed1a9['toFixed'](0x2));_0x990ad1['push'](_0x260de3['toFixed'](0x2));if(_0x2fae3c==-0x1&&_0x260de3==0x0){_0x2fae3c=_0x2ec7ec-0x1;}if(_0x260de3<=0x0){_0xec75f8['classList'][_0x5b5a('0x11')](_0x5b5a('0xd'));_0x229078++;}if(_0x229078>0x3||_0x526328==0x1){_0x4538cf['innerHTML']='⋮';_0x43c433[_0x5b5a('0x1e')]='⋮';_0x3ea012[_0x5b5a('0x1e')]='⋮';_0x345780[_0x5b5a('0x1e')]='⋮';}if(_0x229078>0x3){break;}_0x2ec7ec++;_0x526328--;}_0x362475[_0x5b5a('0x1e')]='躺平计算器（还能活'+'<span\x20class=\x27liveYear\x27>'+(_0x2fae3c!=-0x1?_0x2fae3c:_0x5b5a('0xf'))+'</span>年）';_0x5df755['innerHTML']=_0x5b641e;drawLineChart(_0x635ead,_0x1f845f,_0x990ad1,_0x314d0c);}function drawLineChart(_0x360d14,_0x659c13,_0x4f72d3,_0x213e5a){if(lineChart){lineChart['destroy']();}lineChart=new Chart(document[_0x5b5a('0x13')]('lineChart')[_0x5b5a('0x28')]('2d'),{'type':_0x5b5a('0x4'),'data':{'labels':_0x360d14,'datasets':[{'label':_0x5b5a('0x21'),'data':_0x659c13,'borderColor':'rgba(31,\x20119,\x20180,\x201)','backgroundColor':'rgba(31,\x20119,\x20180,\x200.2)','fill':!![]},{'label':'消费','data':_0x213e5a,'borderColor':'rgba(44,\x20160,\x2044,\x201)','backgroundColor':'rgba(44,\x20160,\x2044,\x200.2)','fill':!![]},{'label':'本金','data':_0x4f72d3,'borderColor':'rgba(214,\x2039,\x2040,\x201)','backgroundColor':'rgba(214,\x2039,\x2040,\x200.2)','fill':!![]}]}});}window[_0x5b5a('0x24')]=function(){calculateInterest();};
</script>
</body>
</html>
