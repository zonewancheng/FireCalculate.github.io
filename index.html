<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <link rel="icon" href="dist/favicon.ico"/>
    <title>躺平计算器</title>
    <link rel="stylesheet" href="dist/css/bootstrap.min.css">
    <script src="dist/js/jquery-3.7.0.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
    <style>
body{font-family:Arial,sans-serif;margin:20px;}label{font-weight:bold;}.negative{background-color:#c2c2c2;}.th-info{font-size:60%;font-weight:100;}.liveYear{color:rgba(214,39,40,1);}#monthlyExpensesDisplay,#principalDisplay{font-size:80%;color:gray;}.floating-text{position:absolute;top:33px;right:10px;background-color:rgba(255,255,255,0.8);padding:5px 10px;border-radius:5px;pointer-events:none;z-index:100;font-size:80%;color:#555555;font-weight:100;}.interest-cell{color:rgba(31,119,180,1);}.annual-expenses-cell{color:rgba(44,160,44,1);}.principal-cell{color:rgba(214,39,40,1);}.alert-info{font-size:80%;}.bg-liability{background-color:rgba(230,230,230,0.85);animation:fadeInBackground 1s ease-in-out;}@keyframes fadeInBackground{from{background-color:transparent;}to{background-color:rgba(230,230,230,0.85);}}.btn-black{color:#fff;background-color:#333;border-color:#333;}.btn-black:hover{color:#fff;background-color:#000;border-color:#000;}
    </style>
    <script src="dist/chart.min.js"></script>
</head>
<body>
<h2 id="pageTitle"></h2>
<div class="row">
    <div class="col-md-4 form-group">
        <label for="principal">本金:</label>
        <div class="input-group">
            <input type="number" id="principal" class="form-control form-control-lg" min="0" max="999999999"
                   step="100000" value="2000000" oninput="limitInputLength(this, 15)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementPrincipal()">-</button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementPrincipal()">+</button>
            </div>
        </div>
        <span id="principalDisplay" class="text-muted"></span>
    </div>
    <div class="col-md-4 form-group">
        <label for="annualInterestRate">年化利率%:</label>
        <div class="input-group">
            <input type="number" id="annualInterestRate" class="form-control form-control-lg" min="0" max="1000"
                   step="0.1" value="2.000" oninput="limitInputLength(this, 6)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementInterestRate()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementInterestRate()">+
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-4 form-group">
        <label for="stableIncome">稳定年收入<span class="th-info">(退休金/副业等)</span>:</label>
        <div class="input-group">
            <input type="number" id="stableIncome" class="form-control form-control-lg" min="0" max="999999999"
                   step="10000" value="0"
                   oninput="limitInputLength(this, 10)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="resetStableIncome()">×</button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementStableIncome()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementStableIncome()">+
                </button>
            </div>
        </div>
        <span id="stableIncomeDisplay" class="text-muted"></span>
    </div>
</div>
<div class="row">
    <div class="col-md-4 form-group bg-liability">
        <label for="annualExpenses">当前年消费:</label>
        <div class="input-group">
            <input type="number" id="annualExpenses" class="form-control form-control-lg" min="0" max="99999999"
                   step="5000" value="45000" oninput="limitInputLength(this, 10)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementAnnualExpenses()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementAnnualExpenses()">+
                </button>
            </div>
        </div>
        <span id="monthlyExpensesDisplay" class="text-muted"></span>
    </div>
    <div class="col-md-4 form-group bg-liability">
        <label for="inflationRate">通胀率%:</label>
        <div class="input-group">
            <input type="number" id="inflationRate" class="form-control form-control-lg" min="0" max="1000" step="0.1"
                   value="2.229" oninput="limitInputLength(this, 6)"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="resetInflationRate()">×</button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="decrementInflationRate()">-
                </button>
                <button class="btn btn-outline-secondary btn-lg" type="button" onclick="incrementInflationRate()">+
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-2 form-group offset-md-2">
        <label><br></label>
        <div class="input-group">
            <button class="btn btn-black btn-lg" onclick="calculateInterest()">计算</button>
        </div>
    </div>
</div>


<div style="position: relative;">
    <canvas id="lineChart" width="400" height="200"></canvas>
    <div id="floatingText" class="floating-text"></div>
</div>

<table class="table table-hover mt-4">
    <thead class="thead-dark">
    <tr>
        <th class="text-center">年数</th>
        <th class="text-center">年利息<span class="th-info">(本金×年化利率)</span></th>
        <th class="text-center">年消费<span class="th-info">(1+通胀率)×上年消费</span></th>
        <th class="text-center">本金<span class="th-info">(上年本金+年利息+年收入-年消费)</span></th>
    </tr>
    </thead>
    <tbody id="resultTable">
    </tbody>
</table>

<div class="alert alert-info" role="alert">
    中国近十年通胀率平均在2.229%左右——<a href="https://www.baidu.com/s?wd=中国近十年通胀率" target="_blank">https://www.baidu.com/s?wd=中国近十年通胀率</a>
</div>

<div class="modal" id="alertModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">提示</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ul id="errorList"></ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
            </div>
        </div>
    </div>
</div>

<script>
const _0x3056=['add','年利息','principalDisplay','max','躺平计算器（还能活','万,\x20月均:','rgba(31,\x20119,\x20180,\x200.2)','innerHTML','text-center','stableIncome','length','getElementById','stepDown','<li>','0\x20≤\x20通胀率\x20≤\x201000（如:2.2229）<a\x20class=\x27th-info\x27\x20href=\x27https://www.baidu.com/s?wd=中国近十年通胀率\x27\x20target=\x27_blank\x27>中国近十年通胀率平均在2.229%左右</a>','destroy','replace','principal-cell','push','rgba(214,\x2039,\x2040,\x200.2)','toFixed','value','lineChart','addEventListener','monthlyExpensesDisplay','insertCell','toString','getContext','interest-cell','stepUp','input','line','#errorList','\x20通胀率:','classList','empty','annualInterestRate','annual-expenses-cell','</li>','append','negative','annualExpenses','0\x20≤\x20年收入\x20≤\x20999999999（如:10000）','</span>年）','rgba(44,\x20160,\x2044,\x200.2)','show','<span\x20class=\x27liveYear\x27>','inflationRate','principal'];const _0x1f64=function(_0x305677,_0x1f644d){_0x305677=_0x305677-0x0;let _0x2bbc93=_0x3056[_0x305677];return _0x2bbc93;};function limitInputLength(_0x204324,_0x12e460){if(_0x204324[_0x1f64('0x15')][_0x1f64('0xa')]>_0x12e460){_0x204324[_0x1f64('0x15')]=_0x204324[_0x1f64('0x15')]['slice'](0x0,_0x12e460);}}function updatePrincipalDisplay(){let _0x392652=parseInt(document['getElementById'](_0x1f64('0x30'))[_0x1f64('0x15')]['replace'](/\D/g,''));document['getElementById']('principal')['value']=_0x392652;document[_0x1f64('0xb')](_0x1f64('0x2'))['textContent']=_0x392652/0x2710+'万';}document[_0x1f64('0xb')]('principal')[_0x1f64('0x17')]('input',updatePrincipalDisplay);updatePrincipalDisplay();function updateMonthlyExpensesDisplay(){const _0x123b91=parseFloat(document['getElementById'](_0x1f64('0x29'))[_0x1f64('0x15')][_0x1f64('0x10')](/\D/g,''));document['getElementById'](_0x1f64('0x29'))[_0x1f64('0x15')]=_0x123b91;document[_0x1f64('0xb')](_0x1f64('0x18'))['textContent']=_0x123b91/0x2710+_0x1f64('0x5')+(_0x123b91/0xc)[_0x1f64('0x14')](0x2);}document['getElementById'](_0x1f64('0x29'))[_0x1f64('0x17')](_0x1f64('0x1e'),updateMonthlyExpensesDisplay);updateMonthlyExpensesDisplay();function updateStableIncomeDisplay(){const _0x1332df=parseFloat(document[_0x1f64('0xb')]('stableIncome')[_0x1f64('0x15')][_0x1f64('0x10')](/\D/g,''));document[_0x1f64('0xb')]('stableIncome')['value']=_0x1332df;document[_0x1f64('0xb')]('stableIncomeDisplay')['textContent']=_0x1332df==0x0?'无':_0x1332df/0x2710+_0x1f64('0x5')+(_0x1332df/0xc)['toFixed'](0x2);}document['getElementById']('stableIncome')[_0x1f64('0x17')]('input',updateStableIncomeDisplay);updateStableIncomeDisplay();function incrementInterestRate(){document[_0x1f64('0xb')]('annualInterestRate')[_0x1f64('0x1d')]();calculateInterest();}function decrementInterestRate(){document[_0x1f64('0xb')](_0x1f64('0x24'))[_0x1f64('0xc')]();calculateInterest();}function incrementPrincipal(){document[_0x1f64('0xb')](_0x1f64('0x30'))['stepUp']();updatePrincipalDisplay();calculateInterest();}function decrementPrincipal(){document[_0x1f64('0xb')]('principal')['stepDown']();updatePrincipalDisplay();calculateInterest();}function incrementAnnualExpenses(){document[_0x1f64('0xb')]('annualExpenses')['stepUp']();updateMonthlyExpensesDisplay();calculateInterest();}function decrementAnnualExpenses(){document[_0x1f64('0xb')](_0x1f64('0x29'))[_0x1f64('0xc')]();updateMonthlyExpensesDisplay();calculateInterest();}function incrementInflationRate(){document['getElementById']('inflationRate')['stepUp']();calculateInterest();}function decrementInflationRate(){document[_0x1f64('0xb')](_0x1f64('0x2f'))['stepDown']();calculateInterest();}function resetInflationRate(){document[_0x1f64('0xb')](_0x1f64('0x2f'))['value']=0x0;calculateInterest();}function incrementStableIncome(){document[_0x1f64('0xb')]('stableIncome')[_0x1f64('0x1d')]();updateStableIncomeDisplay();calculateInterest();}function decrementStableIncome(){document[_0x1f64('0xb')](_0x1f64('0x9'))[_0x1f64('0xc')]();updateStableIncomeDisplay();calculateInterest();}function resetStableIncome(){document[_0x1f64('0xb')](_0x1f64('0x9'))[_0x1f64('0x15')]=0x0;updateStableIncomeDisplay();calculateInterest();}function showAlert(_0x491342){let _0x23f645=$(_0x1f64('0x20'));_0x23f645[_0x1f64('0x23')]();$['each'](_0x491342,function(_0x467cf1,_0x12a288){_0x23f645[_0x1f64('0x27')](_0x1f64('0xd')+_0x12a288+_0x1f64('0x26'));});$('#alertModal')['modal'](_0x1f64('0x2d'));}let lineChart;function calculateInterest(){let _0x118ec5=parseFloat(document[_0x1f64('0xb')](_0x1f64('0x30'))[_0x1f64('0x15')]);let _0xdb31e3=parseFloat(document[_0x1f64('0xb')]('stableIncome')[_0x1f64('0x15')]);let _0x49abd9=parseFloat(document['getElementById'](_0x1f64('0x24'))[_0x1f64('0x15')]);let _0x16d529=parseFloat(document['getElementById'](_0x1f64('0x29'))[_0x1f64('0x15')]);let _0x1b0263=parseFloat(document[_0x1f64('0xb')](_0x1f64('0x2f'))['value']);let _0x3c5669=0x1;let _0x255d4b=0x65;let _0x5912e1='年化:'+_0x49abd9+'%\x20本金:'+_0x118ec5+'\x20当前年消费:'+_0x16d529+_0x1f64('0x21')+_0x1b0263+'%';let _0x5af97b=[];if(isNaN(_0x118ec5)||_0x118ec5<0x0||_0x118ec5>0x38d7ea4c67fff){_0x5af97b[_0x1f64('0x12')]('0\x20≤\x20本金\x20≤\x20999999999999999（如:2000000）');}if(isNaN(_0x49abd9)||_0x49abd9<0x0||_0x49abd9>0x3e8){_0x5af97b['push']('0\x20≤\x20年化利率\x20≤\x201000（如:1.693）');}if(isNaN(_0xdb31e3)||_0xdb31e3<0x0||_0xdb31e3>0x3b9ac9ff){_0x5af97b['push'](_0x1f64('0x2a'));}if(isNaN(_0x16d529)||_0x16d529<0x0||_0x16d529>0x2540be3ff){_0x5af97b[_0x1f64('0x12')]('0\x20≤\x20当前年消费\x20≤\x209999999999（如:600000）');}else{_0x16d529=_0x16d529*-0x1;}if(isNaN(_0x1b0263)||_0x1b0263<0x0||_0x1b0263>0x3e8){_0x5af97b['push'](_0x1f64('0xe'));}if(_0x5af97b['length']>0x0){showAlert(_0x5af97b);return;}let _0x4d9f47=document[_0x1f64('0xb')]('resultTable');let _0xbf4bd9=document[_0x1f64('0xb')]('pageTitle');let _0x494b38=document[_0x1f64('0xb')]('floatingText');_0x4d9f47[_0x1f64('0x7')]='';let _0x37acb2=[];let _0x22164f=[];let _0x5b920a=[];let _0x135b8f=[];let _0x50338a=-0x1;let _0x45b8b1=0x0;let _0x1aca3a;while(_0x255d4b>0x0){_0x1aca3a=_0x118ec5*(_0x49abd9/0x64);_0x16d529=(0x1+_0x1b0263/0x64)*_0x16d529;let _0x4d8eb9=_0x16d529*-0x1>_0x118ec5+_0x1aca3a+_0xdb31e3;_0x118ec5=_0x118ec5+_0x1aca3a+_0xdb31e3+_0x16d529;_0x1aca3a=Math[_0x1f64('0x3')](_0x1aca3a,0x0);_0x118ec5=Math['max'](_0x118ec5,0x0);let _0x8ad424=_0x4d9f47['insertRow']();let _0x4afe87=_0x8ad424['insertCell'](0x0);let _0x41c48=_0x8ad424['insertCell'](0x1);let _0x1db509=_0x8ad424[_0x1f64('0x19')](0x2);let _0x38d868=_0x8ad424['insertCell'](0x3);_0x4afe87[_0x1f64('0x22')][_0x1f64('0x0')](_0x1f64('0x8'));_0x41c48['classList'][_0x1f64('0x0')](_0x1f64('0x1c'),'text-center');_0x1db509[_0x1f64('0x22')][_0x1f64('0x0')](_0x1f64('0x25'),'text-center');_0x38d868['classList'][_0x1f64('0x0')](_0x1f64('0x11'),'text-center');_0x4afe87['innerHTML']=_0x3c5669[_0x1f64('0x1a')]();_0x41c48['innerHTML']=_0x1aca3a[_0x1f64('0x14')](0x2);if(_0x4d8eb9){_0x1db509[_0x1f64('0x7')]=_0x16d529['toFixed'](0x2)+'(不足)';}else{_0x1db509['innerHTML']=_0x16d529[_0x1f64('0x14')](0x2);_0x135b8f[_0x1f64('0x12')](_0x16d529['toFixed'](0x2));}_0x38d868['innerHTML']=_0x118ec5[_0x1f64('0x14')](0x2);_0x37acb2[_0x1f64('0x12')](_0x3c5669);_0x22164f[_0x1f64('0x12')](_0x1aca3a[_0x1f64('0x14')](0x2));_0x5b920a[_0x1f64('0x12')](_0x118ec5[_0x1f64('0x14')](0x2));if(_0x50338a==-0x1&&_0x118ec5==0x0){_0x50338a=_0x3c5669-0x1;}if(_0x118ec5<=0x0){_0x8ad424[_0x1f64('0x22')][_0x1f64('0x0')](_0x1f64('0x28'));_0x45b8b1++;}if(_0x45b8b1>0x3||_0x255d4b==0x1){_0x4afe87['innerHTML']='⋮';_0x41c48['innerHTML']='⋮';_0x1db509['innerHTML']='⋮';_0x38d868[_0x1f64('0x7')]='⋮';}if(_0x45b8b1>0x3){break;}_0x3c5669++;_0x255d4b--;}_0xbf4bd9['innerHTML']=_0x1f64('0x4')+_0x1f64('0x2e')+(_0x50338a!=-0x1?_0x50338a:'100+')+_0x1f64('0x2b');_0x494b38[_0x1f64('0x7')]=_0x5912e1;drawLineChart(_0x37acb2,_0x22164f,_0x5b920a,_0x135b8f);}function drawLineChart(_0x233f5a,_0x59f2fd,_0x53d42f,_0x680bc3){if(lineChart){lineChart[_0x1f64('0xf')]();}lineChart=new Chart(document['getElementById'](_0x1f64('0x16'))[_0x1f64('0x1b')]('2d'),{'type':_0x1f64('0x1f'),'data':{'labels':_0x233f5a,'datasets':[{'label':_0x1f64('0x1'),'data':_0x59f2fd,'borderColor':'rgba(31,\x20119,\x20180,\x201)','backgroundColor':_0x1f64('0x6'),'fill':!![]},{'label':'消费','data':_0x680bc3,'borderColor':'rgba(44,\x20160,\x2044,\x201)','backgroundColor':_0x1f64('0x2c'),'fill':!![]},{'label':'本金','data':_0x53d42f,'borderColor':'rgba(214,\x2039,\x2040,\x201)','backgroundColor':_0x1f64('0x13'),'fill':!![]}]}});}window['onload']=function(){calculateInterest();};
</script>
</body>
</html>
