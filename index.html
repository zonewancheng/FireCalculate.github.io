<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <link rel="icon" href="dist/favicon.ico"/>
    <title>躺平计算器</title>
    <link rel="stylesheet" href="dist/css/bootstrap.min.css">
    <style>
body{font-family:Arial,sans-serif;margin:20px;}label{font-weight:bold;}.negative{background-color:#c2c2c2;}.th-info{font-size:60%;font-weight:100;}#monthlyExpensesDisplay{font-size:50%;color:gray;}.floating-text{position:absolute;top:33px;right:10px;background-color:rgba(255,255,255,0.8);padding:5px 10px;border-radius:5px;pointer-events:none;z-index:100;font-size:60%;color:gray;font-weight:100;}.interest-cell{color:rgba(31,119,180,1);}.annual-expenses-cell{color:rgba(44,160,44,1);}.principal-cell{color:rgba(214,39,40,1);}.alert-info{font-size:80%;}
    </style>
    <script src="dist/chart.min.js"></script>
</head>
<body>
<h2 id="pageTitle"></h2>

<div class="row">
    <div class="col-md-2 form-group">
        <label for="annualInterestRate">年化利率%:</label>
        <input type="number" id="annualInterestRate" class="form-control" min="0" max="1000" step="0.01" value="2.000"/>
    </div>
    <div class="col-md-3 form-group">
        <label for="principal">本金:</label>
        <input type="number" id="principal" class="form-control" min="0" step="100000" value="2000000"/>
    </div>
    <div class="col-md-2 form-group">
        <label for="annualExpenses">当前年消费:</label>
        <input type="number" id="annualExpenses" class="form-control" min="0" max="10000000" step="5000" value="60000"/>
        <span id="monthlyExpensesDisplay" class="text-muted"></span>
    </div>
    <div class="col-md-3 form-group">
        <label for="inflationRate">通胀率%:</label>
        <div class="input-group">
            <input type="number" id="inflationRate" class="form-control" min="0" max="1000" step="0.01" value="2.229"/>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" onclick="toggleInflationRate()">
                    <span id="inflationRateIcon">×</span>
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-2 form-group">
        <label><br></label>
        <div class="input-group">
            <button class="btn btn-success" onclick="calculateInterest()">计算</button>
        </div>
    </div>
</div>


<div style="position: relative;">
    <canvas id="lineChart" width="400" height="200"></canvas>
    <div id="floatingText" class="floating-text"></div>
</div>

<table class="table table-hover mt-4">
    <thead class="thead-dark">
    <tr>
        <th>年数</th>
        <th class="text-center">年利息<span class="th-info">(本金×年化利率)</span></th>
        <th class="text-center">年消费<span class="th-info">(1+通胀率)×上年消费</span></th>
        <th class="text-center">本金<span class="th-info">(上年本金+年利息-年消费)</span></th>
    </tr>
    </thead>
    <tbody id="resultTable">
    </tbody>
</table>

<div class="alert alert-info" role="alert">
    中国近十年通胀率平均在2.229%左右——<a href="https://www.baidu.com/s?wd=中国近十年通胀率" target="_blank">https://www.baidu.com/s?wd=中国近十年通胀率</a>
</div>

<script>
const _0x1f5d=['rgba(31,\x20119,\x20180,\x200.2)','=\x20(1\x20+\x20','onload','add','principal','principal-cell','getContext','annualInterestRate','title','\x20-\x20','classList','destroy','text-center','getElementById','addEventListener','max','toString','toFixed','\x20当前年消费:','insertRow','0\x20≤\x20年化利率\x20≤\x201000（如:1.693）','0\x20≤\x20本金（如:2000000）','value','annualExpenses','年化:','100+','月均:','input','rgba(214,\x2039,\x2040,\x201)','innerHTML','insertCell','\x20通胀率:','rgba(44,\x20160,\x2044,\x201)'];const _0x313f=function(_0x1f5d14,_0x313f16){_0x1f5d14=_0x1f5d14-0x0;let _0x55993d=_0x1f5d[_0x1f5d14];return _0x55993d;};function toggleInflationRate(){const _0x458dd1=document['getElementById']('inflationRate');_0x458dd1['value']='0';calculateInterest();}function updateMonthlyExpensesDisplay(){const _0x2777d9=document[_0x313f('0xd')](_0x313f('0x17'));const _0x4d5ca6=document['getElementById']('monthlyExpensesDisplay');const _0x1e1f86=parseFloat(_0x2777d9[_0x313f('0x16')]);const _0x1012f5=(_0x1e1f86/0xc)[_0x313f('0x11')](0x2);_0x4d5ca6['textContent']=_0x313f('0x1a')+_0x1012f5;}document[_0x313f('0xd')]('annualExpenses')[_0x313f('0xe')](_0x313f('0x1b'),updateMonthlyExpensesDisplay);updateMonthlyExpensesDisplay();let lineChart;function calculateInterest(){let _0x3909bc=parseFloat(document[_0x313f('0xd')](_0x313f('0x4'))[_0x313f('0x16')]);let _0x349d5e=parseFloat(document[_0x313f('0xd')](_0x313f('0x7'))[_0x313f('0x16')]);let _0x4abd62=parseFloat(document['getElementById']('annualExpenses')[_0x313f('0x16')]);let _0x48cdc4=parseFloat(document['getElementById']('inflationRate')['value']);let _0x375474=0x1;let _0x107d7b=0x65;let _0x4d6661=_0x313f('0x18')+_0x349d5e+'%\x20本金:'+_0x3909bc+_0x313f('0x12')+_0x4abd62+_0x313f('0x1f')+_0x48cdc4+'%';if(isNaN(_0x349d5e)||_0x349d5e<0x0||_0x349d5e>0x3e8){alert(_0x313f('0x14'));return;}if(isNaN(_0x3909bc)||_0x3909bc<0x0){alert(_0x313f('0x15'));return;}if(isNaN(_0x4abd62)||_0x4abd62<0x0||_0x4abd62>0x989680){alert('0\x20≤\x20当前年消费\x20≤\x2010000000（如:600000）');return;}_0x4abd62=_0x4abd62*-0x1;if(isNaN(_0x48cdc4)||_0x48cdc4<0x0||_0x48cdc4>0x3e8){alert('0\x20≤\x20通胀率\x20≤\x201000（如:2.2229）');return;}let _0x1c86ec=document['getElementById']('resultTable');let _0xadf33e=document[_0x313f('0xd')]('pageTitle');let _0xb247ab=document['getElementById']('floatingText');_0x1c86ec['innerHTML']='';let _0x50d7fb=[];let _0x324ed7=[];let _0x3a9af1=[];let _0x20e996=[];let _0x126716=-0x1;let _0x1ed6b0=0x0;let _0x19ca5c;while(_0x107d7b>0x0){let _0x492090='=\x20'+_0x3909bc[_0x313f('0x11')](0x2)+'\x20×\x20'+_0x349d5e+'%';_0x19ca5c=_0x3909bc*(_0x349d5e/0x64);let _0x24a0aa=_0x313f('0x1')+_0x48cdc4+'%)\x20×\x20'+(_0x4abd62*-0x1)[_0x313f('0x11')](0x2);_0x4abd62=(0x1+_0x48cdc4/0x64)*_0x4abd62;let _0x46d4b2='=\x20'+_0x3909bc[_0x313f('0x11')](0x2)+'\x20+\x20'+_0x19ca5c[_0x313f('0x11')](0x2)+_0x313f('0x9')+(_0x4abd62*-0x1)[_0x313f('0x11')](0x2);let _0x269211=_0x4abd62*-0x1>_0x3909bc;_0x3909bc=_0x3909bc+_0x19ca5c+_0x4abd62;_0x19ca5c=Math[_0x313f('0xf')](_0x19ca5c,0x0);_0x3909bc=Math['max'](_0x3909bc,0x0);let _0x436e5f=_0x1c86ec[_0x313f('0x13')]();let _0x4f57e7=_0x436e5f['insertCell'](0x0);let _0x32426c=_0x436e5f['insertCell'](0x1);let _0x5a166d=_0x436e5f[_0x313f('0x1e')](0x2);let _0x161d49=_0x436e5f['insertCell'](0x3);_0x32426c[_0x313f('0xa')]['add']('interest-cell','text-center');_0x5a166d['classList'][_0x313f('0x3')]('annual-expenses-cell',_0x313f('0xc'));_0x161d49['classList']['add'](_0x313f('0x5'),_0x313f('0xc'));_0x4f57e7[_0x313f('0x1d')]=_0x375474[_0x313f('0x10')]();_0x32426c[_0x313f('0x1d')]=_0x19ca5c[_0x313f('0x11')](0x2);if(_0x269211){_0x5a166d['innerHTML']='×';}else{_0x5a166d['innerHTML']=_0x4abd62[_0x313f('0x11')](0x2);_0x20e996['push'](_0x4abd62['toFixed'](0x2));_0x32426c[_0x313f('0x8')]=_0x492090;_0x5a166d['title']=_0x24a0aa;_0x161d49['title']=_0x46d4b2;}_0x161d49[_0x313f('0x1d')]=_0x3909bc['toFixed'](0x2);_0x50d7fb['push'](_0x375474);_0x324ed7['push'](_0x19ca5c[_0x313f('0x11')](0x2));_0x3a9af1['push'](_0x3909bc[_0x313f('0x11')](0x2));if(_0x126716==-0x1&&_0x3909bc==0x0){_0x126716=_0x375474-0x1;}if(_0x3909bc<=0x0){_0x436e5f[_0x313f('0xa')]['add']('negative');_0x1ed6b0++;}if(_0x1ed6b0>0x3||_0x107d7b==0x1){_0x4f57e7[_0x313f('0x1d')]='⋮';_0x32426c['innerHTML']='⋮';_0x5a166d['innerHTML']='⋮';_0x161d49[_0x313f('0x1d')]='⋮';}if(_0x1ed6b0>0x3){break;}_0x375474++;_0x107d7b--;}_0xadf33e['innerHTML']='躺平计算器（还能活'+(_0x126716!=-0x1?_0x126716:_0x313f('0x19'))+'年）';_0xb247ab['innerHTML']=_0x4d6661;drawLineChart(_0x50d7fb,_0x324ed7,_0x3a9af1,_0x20e996);}function drawLineChart(_0xc40270,_0x27b815,_0x523274,_0x366384){if(lineChart){lineChart[_0x313f('0xb')]();}lineChart=new Chart(document[_0x313f('0xd')]('lineChart')[_0x313f('0x6')]('2d'),{'type':'line','data':{'labels':_0xc40270,'datasets':[{'label':'年利息','data':_0x27b815,'borderColor':'rgba(31,\x20119,\x20180,\x201)','backgroundColor':_0x313f('0x0'),'fill':!![]},{'label':'消费','data':_0x366384,'borderColor':_0x313f('0x20'),'backgroundColor':'rgba(44,\x20160,\x2044,\x200.2)','fill':!![]},{'label':'本金','data':_0x523274,'borderColor':_0x313f('0x1c'),'backgroundColor':'rgba(214,\x2039,\x2040,\x200.2)','fill':!![]}]}});}window[_0x313f('0x2')]=function(){calculateInterest();};
</script>
</body>
</html>
